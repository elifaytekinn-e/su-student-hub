<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASÜ Student Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>tailwind.config = { theme: { extend: { colors: { asuDark: '#0f172a', asuCard: '#1e293b', asuPurple: '#6366f1' } } } }</script>
    <style> .bg-grid { background-image: radial-gradient(#334155 1px, transparent 1px); background-size: 40px 40px; } </style>
</head>
<body class="bg-asuDark text-slate-200 min-h-screen flex flex-col bg-grid">
    <nav class="bg-asuCard/90 backdrop-blur-md border-b border-slate-700 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 flex justify-between h-20 items-center">
            <a href="index.html" class="flex items-center gap-3"><img src="asu_logo.png" class="h-10"><div><h1 class="text-xl font-bold text-white">ASÜ<span class="text-asuPurple">HUB</span></h1></div></a>
            <div class="hidden md:flex space-x-6 text-sm font-medium items-center">
                <a href="index.html" class="text-white">Ana Sayfa</a>
                <a href="notes.html" class="text-slate-400 hover:text-white">Ders Notları</a>
                <a href="books.html" class="text-slate-400 hover:text-white">ASÜ Sahaf</a>
                <div id="auth-buttons" class="flex gap-4 ml-4"><a href="login.html" class="text-slate-400">Giriş</a><a href="login.html" class="bg-asuPurple text-white px-5 py-2.5 rounded-md">Kayıt Ol</a></div>
                <div id="user-profile" class="hidden"><a href="profile.html" class="w-10 h-10 rounded-full bg-indigo-900 flex items-center justify-center text-white font-bold" id="userAvatar">..</a></div>
            </div>
            <button class="md:hidden text-white text-2xl" onclick="document.getElementById('mobile-menu').classList.toggle('hidden')"><i class="fa-solid fa-bars"></i></button>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-slate-900 border-t border-slate-700 p-4 space-y-3">
            <a href="index.html" class="block text-white">Ana Sayfa</a>
            <a href="notes.html" class="block text-slate-300">Ders Notları</a>
            <a href="books.html" class="block text-slate-300">ASÜ Sahaf</a>
            <a href="login.html" class="block text-asuPurple font-bold">Giriş / Kayıt</a>
        </div>
    </nav>
    <header class="pt-20 pb-16 text-center relative">
        <h2 class="text-5xl font-bold text-white mb-6">Kampüsün Dijital <span class="text-asuPurple">Hafızası.</span></h2>
        <div class="max-w-2xl mx-auto relative group mb-16">
            <div class="relative flex bg-asuCard rounded-lg overflow-hidden border border-slate-600 shadow-2xl">
                <input type="text" id="searchInput" class="w-full bg-transparent text-white px-4 py-4 outline-none" placeholder="Ders notu veya kitap ara...">
                <button onclick="window.location.href=`notes.html?q=${document.getElementById('searchInput').value}`" class="bg-asuPurple text-white px-8 font-medium">ARA</button>
            </div>
        </div>
        <div class="grid grid-cols-2 md:grid-cols-4 gap-6 max-w-4xl mx-auto border-t border-slate-800 pt-8">
            <div><div class="text-3xl font-bold text-white" id="statNotes">0</div><div class="text-xs text-slate-500 uppercase mt-1">Not</div></div>
            <div><div class="text-3xl font-bold text-white" id="statBooks">0</div><div class="text-xs text-slate-500 uppercase mt-1">Kitap</div></div>
        </div>
    </header>
    <script>
        const SUPABASE_URL = "https://kmzbywrcspzwuznexcla.supabase.co";
        const SUPABASE_KEY = "sb_publishable_2mPJ390ssxg8euZ9hgmfFg_O5mPR1Fh"; 

        const asuDb = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        window.addEventListener('load', async () => {
            const userEmail = localStorage.getItem('userEmail');
            if(userEmail) { document.getElementById('auth-buttons').classList.add('hidden'); document.getElementById('user-profile').classList.remove('hidden'); document.getElementById('userAvatar').innerText = userEmail.substring(0,2).toUpperCase(); }
            const { count: n } = await asuDb.from('notes').select('*', { count: 'exact', head: true }).eq('is_approved', true);
            const { count: b } = await asuDb.from('books').select('*', { count: 'exact', head: true }).eq('is_approved', true);
            if(n!==null) document.getElementById('statNotes').innerText = n;
            if(b!==null) document.getElementById('statBooks').innerText = b;
        });
    </script>
</body>
</html>
